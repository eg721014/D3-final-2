<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>d3-start</title>
    <script src="https://d3js.org/d3.v3.js"></script>
    
</head>
<body>
     <h3>2005年研發支出</h3>
      <svg id="RDdata02-1-1" width="600" height="150"></svg>
        <script>
        d3.csv("RDdata02-1.csv",function(dataSet) {
         var body = d3.select("body");
         var count = 0;
         for(var i=0; i < dataSet.length; i++) {
            if(parseInt(dataSet[i].amount) > 0 && dataSet[i].year === "2005" ) {
              body.select("#RDdata02-1-1").append("text").attr({
                x: 0,
                y: 20 + 20 * count,
                "font-size": 12
              }).text(dataSet[i].type);
                
              d3.select("#RDdata02-1-1")
              .append("rect")
              .transition()
              .duration(2000)
              .delay(function(d, i){
                     return i*2000;
                })
              .attr({
                 x: 200,
                 y: 10 + 20 * count,
                 width: dataSet[i].amount/100 ,
                 height: 10,
                 fill: "red"
              });
              count++;
            }
            
         }
        });
            </script>
            <h3>2010年研發支出</h3>
      <svg id="RDdata02-1-2" width="600" height="150"></svg>
        <script>
        d3.csv("RDdata02-1.csv",function(dataSet) {
         var body = d3.select("body");
         var count = 0;
         for(var i=0; i < dataSet.length; i++) {
            if(parseInt(dataSet[i].amount) >0 && dataSet[i].year === "2010" ) {
              body.select("#RDdata02-1-2").append("text").attr({
                x: 0,
                y: 20 + 20 * count,
                "font-size": 12
              }).text(dataSet[i].type);
                
              d3.select("#RDdata02-1-2")
              .append("rect")
              .transition()
              .duration(4000)
              .delay(function(d, i){
                     return i*4000;
                })
              .attr({
                 x: 200,
                 y: 10 + 20 * count,
                 width: dataSet[i].amount/100 ,
                 height: 10,
                 fill: "blue"
              });
              count++;
            }
            
         }
        });
        </script>
         <h3>2014年研發支出</h3>
      <svg id="RDdata02-1-3" width="600" height="150"></svg>
        <script>
        d3.csv("RDdata02-1.csv",function(dataSet) {
         var body = d3.select("body");
         var count = 0;
         for(var i=0; i < dataSet.length; i++) {
            if(parseInt(dataSet[i].amount) >0 && dataSet[i].year === "2014" ) {
              body.select("#RDdata02-1-3").append("text").attr({
                x: 0,
                y: 20 + 20 * count,
                "font-size": 12
              }).text(dataSet[i].type);
                
              d3.select("#RDdata02-1-3")
              .append("rect")
              .transition()
              .duration(8000)
              .delay(function(d, i){
                     return i*8000;
                })
              .attr({
                 x: 200,
                 y: 10 + 20 * count,
                 width: dataSet[i].amount/100 ,
                 height: 10,
                 fill: "green"
              });
              count++;
            }
            
         }
        });
        </script>
       
</body>
</html>